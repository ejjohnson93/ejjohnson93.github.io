<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>LEGO activity 2 - speakers and sound</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">CBF</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Activities
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="activity1.html">Activity 1 - introduction</a>
    </li>
    <li>
      <a href="activity2.html">Activity 2 - python poem</a>
    </li>
    <li>
      <a href="activity3.html">Activity 3 - data analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Robot activities
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mindstorm2.html">Hello LEGO!</a>
    </li>
    <li>
      <a href="mindstorm3.html">speakers and sound</a>
    </li>
    <li>
      <a href="mindstorm4.html">Motors and movement</a>
    </li>
    <li>
      <a href="mindstorm5.html">Colours and control</a>
    </li>
    <li>
      <a href="mindstorm_challenges.html">Challenges</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Micro:bit activities
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="microbit2.html">Hello micro:bit!</a>
    </li>
    <li>
      <a href="microbit3.html">Beating heart</a>
    </li>
    <li>
      <a href="microbit4.html">Dice roller</a>
    </li>
    <li>
      <a href="microbit_extrachallenges.html">Extra challenges</a>
    </li>
  </ul>
</li>
<li>
  <a href="about.html">About us</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/LivUniCBF">
    <span class="fab fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://www.liverpool.ac.uk/computational-biology-facility/">
    <span class="fas fa-globe"></span>
     
    Website
  </a>
</li>
<li>
  <a href="https://github.com/ejjohnson93/ejjohnson93.github.io">
    <span class="fab fa-github"></span>
     
    Source code
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">LEGO activity 2 - speakers and sound</h1>

</div>


<p><br></p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>In the first activity we used the word blocks and python to write a
message on the light up screen. Next we are going to program the robot’s
speakers.</p>
<p>Like the previous activity we’ll first create the code using word
blocks, then translate into python.</p>
<p><br> <br></p>
</div>
<div id="play-a-beep" class="section level1">
<h1>Play a beep</h1>
<div id="word-blocks" class="section level2">
<h2>Word blocks</h2>
<p>We’ll start with a very basic program, just making our hub play a
single sound.</p>
<p>Open a new project, select word blocks and then make the following
program:</p>
<p><br></p>
<center>
<p><img src="images/lego3.png" /></p>
</center>
<p><br></p>
<p>Not massively interesting so far but we’ll get there!</p>
<p><br><br></p>
</div>
<div id="python" class="section level2">
<h2>Python</h2>
<p>Now we’re going to write that same program in python.</p>
<p>As in the first activity we create a new project and select python,
remember we can ignore the first 7 lines of code.</p>
<p>Next, we’re going to edit line 10 to contain our program. The code is
below (you can click the ‘code’ buttons to reveal the text if you want
to copy and paste it throughout this page):</p>
<p><br></p>
<center>
<p><img src="images/lego4.png" /></p>
</center>
<pre class="python fold-hide"><code>from mindstorms import MSHub, Motor, MotorPair, ColorSensor, DistanceSensor, App
from mindstorms.control import wait_for_seconds, wait_until, Timer
from mindstorms.operator import greater_than, greater_than_or_equal_to, less_than, less_than_or_equal_to, equal_to, not_equal_to
import math

# Create your objects here.
hub = MSHub()

# Write your program here.
hub.speaker.beep(60, 0.25)</code></pre>
<p><br></p>
<p>In the previous activity we accessed the ‘light_matrix’ within ‘hub’.
This time it is the speaker. The speaker has a ‘beep’ function and then
we pass it two arguments: the tone and the length of the tone (in
seconds). When you execute this code it does the same as the word blocks
above.</p>
<p><b>Challenge: try playing around with different numbers for the tone
and the length. </b></p>
<p>(Hint: the tone can be any number between 44 and 123. What happens
what you use a number outside of this range?)</p>
<p>We can also pass an optional third argument to the ‘beep’ function to
control the volume. Try running the below code as an example:</p>
<center>
<p><img src="images/lego5.png" /></p>
</center>
<pre class="python fold-hide"><code>from mindstorms import MSHub, Motor, MotorPair, ColorSensor, DistanceSensor, App
from mindstorms.control import wait_for_seconds, wait_until, Timer
from mindstorms.operator import greater_than, greater_than_or_equal_to, less_than, less_than_or_equal_to, equal_to, not_equal_to
import math

# Create your objects here.
hub = MSHub()

# Write your program here.
hub.speaker.beep(60, 1, 50)
hub.speaker.beep(60, 1, 75)
hub.speaker.beep(60, 1, 100)</code></pre>
<p><br> <br></p>
</div>
</div>
<div id="play-a-sound" class="section level1">
<h1>Play a sound</h1>
<p>As well as being able to beep in different tones, the hub also comes
with lots of inbuilt sounds you can use. If we scroll down to the sound
work blocks there is a block that says ‘play sound &lt;x&gt; until
done’.</p>
<p><br></p>
<center>
<p><img src="images/lego7.png" /></p>
</center>
<p><br></p>
<p>If you click ‘add sound’ you can see all the sounds that are
available on the hub. Let’s create a simple program that plays three
different sounds sequentially:</p>
<p><br></p>
<center>
<p><img src="images/lego6.png" /></p>
</center>
<p><br></p>
<p>You might notice there is another sound block called ‘start sound
&lt;x&gt;’. What happens if you use this instead?</p>
<p><br></p>
<p>Now let’s translate the above code into python again.</p>
<p><br></p>
<center>
<p><img src="images/lego8.png" /></p>
</center>
<pre class="python fold-hide"><code>from mindstorms import MSHub, Motor, MotorPair, ColorSensor, DistanceSensor, App
from mindstorms.control import wait_for_seconds, wait_until, Timer
from mindstorms.operator import greater_than, greater_than_or_equal_to, less_than, less_than_or_equal_to, equal_to, not_equal_to
import math

# Create your objects here.
hub = MSHub()

# Write your program here.
hub.speaker.play_sound(&#39;Hello&#39;)
hub.speaker.play_sound(&#39;Hi&#39;)
hub.speaker.play_sound(&#39;Ha Ha&#39;)</code></pre>
<p>You might wonder how you’d get the name of the sound without first
creating this program with word blocks. We can do this by looking on the
manual page of ‘play_sound’. We access the manual by clicking the button
on the right, then clicking ‘python’. This will bring up a manual for
all the lego python commands. We have to scroll down until we see the
title ‘Hub’ then click ‘Speaker’. After this you click ‘play_sound()’
and it will bring up information about that command. A full list of the
sounds is included on this page.</p>
<p><br></p>
<center>
<p><img src="images/lego9.png" /></p>
<p><img src="images/lego10.png" /></p>
<p><img src="images/lego11.png" /></p>
</center>
<p><br></p>
<p>The manual will contain information and example python code for
nearly all of the word blocks so is useful for translating between the
two.</p>
<p><br><br></p>
</div>
<div id="play-a-tune" class="section level1">
<h1>Play a tune</h1>
<div id="word-blocks-1" class="section level2">
<h2>Word blocks</h2>
<p>We’re now going to create a short and simple tune using our LEGO word
blocks. When we find the block ‘play beep’ and click on the tone it
brings up a little keyboard for us to look at. Tone 60 actually
corresponds to middle C on a piano.</p>
<center>
<p><img src="images/image10-1024x264.jpg" /></p>
<p><img src="images/lego13.png" /></p>
</center>
<p><br></p>
<p>As we go up or down in tone you can imagine we’re going up or down on
a piano.</p>
<p>We are now going to write a program that plays a simple tune for
us:</p>
<p><br></p>
<center>
<p><img src="images/lego12.png" /></p>
</center>
<p><br></p>
<p>(It might sound faintly familiar - these are the first few notes of
‘twinkle twinkle little star’!)</p>
<p>If we wanted to we could make the tune repeat using the ‘repeat’ word
block:</p>
<p><br></p>
<center>
<p><img src="images/lego14.png" /></p>
</center>
<p><br></p>
<p><b>Challenge: create a tune using the word blocks. Now make it repeat
as many times as you like. </b></p>
<p><br><br></p>
</div>
<div id="python-1" class="section level2">
<h2>Python</h2>
<p>Now let’s translate those above code blocks into python. We showed
earlier how you can use the ‘hub.speaker.beep()’ function to play tones.
The code to play our above word blocks would be:</p>
<p><br></p>
<center>
<p><img src="images/lego15.png" /></p>
</center>
<pre class="python fold-hide"><code>from mindstorms import MSHub, Motor, MotorPair, ColorSensor, DistanceSensor, App
from mindstorms.control import wait_for_seconds, wait_until, Timer
from mindstorms.operator import greater_than, greater_than_or_equal_to, less_than, less_than_or_equal_to, equal_to, not_equal_to
import math

# Create your objects here.
hub = MSHub()

# Write your program here.
hub.speaker.beep(60, 0.5)
hub.speaker.beep(60, 0.5)
hub.speaker.beep(67, 0.5)
hub.speaker.beep(67, 0.5)
hub.speaker.beep(69, 0.5)
hub.speaker.beep(69, 0.5)
hub.speaker.beep(67, 0.5)</code></pre>
<p>We made our word block program more complicated by getting it to
repeat three times. We could do that in python by pasting the code three
times:</p>
<pre class="python"><code># Write your program here.
#1
hub.speaker.beep(60, 0.5)
hub.speaker.beep(60, 0.5)
hub.speaker.beep(67, 0.5)
hub.speaker.beep(67, 0.5)
hub.speaker.beep(69, 0.5)
hub.speaker.beep(69, 0.5)
hub.speaker.beep(67, 0.5)

#2
hub.speaker.beep(60, 0.5)
hub.speaker.beep(60, 0.5)
hub.speaker.beep(67, 0.5)
hub.speaker.beep(67, 0.5)
hub.speaker.beep(69, 0.5)
hub.speaker.beep(69, 0.5)
hub.speaker.beep(67, 0.5)

#3
hub.speaker.beep(60, 0.5)
hub.speaker.beep(60, 0.5)
hub.speaker.beep(67, 0.5)
hub.speaker.beep(67, 0.5)
hub.speaker.beep(69, 0.5)
hub.speaker.beep(69, 0.5)
hub.speaker.beep(67, 0.5)</code></pre>
<p><br></p>
<p>But this requires a lot of typing/space to do so!</p>
<p>In programming we can ‘loop’ through the same piece of code over and
over again. In python we can use what is known as a <i>‘for loop’</i> to
loop through something a set number of times, using the following
format:</p>
<pre class="python"><code>for i in range(NUMBER OF REPEATS):
  code.you.want.to.repeat</code></pre>
<p><br></p>
<p>We provide python a range in the form of a number. Then the code we
want to repeat. So for example, if we were to go back in replit and
paste this code, we’d print ‘hello world!’ 4 times (you can try this if
you want).</p>
<pre class="python"><code>
for i in range(4):
  print(&quot;hello world!&quot;)</code></pre>
<pre><code>## hello world!
## hello world!
## hello world!
## hello world!</code></pre>
<p><br></p>
<p>Now let’s apply that to our LEGO robot program. Here we specify three
loops…</p>
<p><br></p>
<center>
<p><img src="images/lego16.png" /></p>
</center>
<pre class="python fold-hide"><code>from mindstorms import MSHub, Motor, MotorPair, ColorSensor, DistanceSensor, App
from mindstorms.control import wait_for_seconds, wait_until, Timer
from mindstorms.operator import greater_than, greater_than_or_equal_to, less_than, less_than_or_equal_to, equal_to, not_equal_to
import math

# Create your objects here.
hub = MSHub()

# Write your program here.
for i in range(3):
    hub.speaker.beep(60, 0.5)
    hub.speaker.beep(60, 0.5)
    hub.speaker.beep(67, 0.5)
    hub.speaker.beep(67, 0.5)
    hub.speaker.beep(69, 0.5)
    hub.speaker.beep(69, 0.5)
    hub.speaker.beep(67, 0.5)</code></pre>
<p><br> The code now loops through our tune three times.</p>
<p><b>Challenge: earlier you created your own tune. Can you recreate
that tune in python? Can you loop it?</b></p>
<p><br><br></p>
<div id="bonus-activity" class="section level3">
<h3>Bonus activity</h3>
<p>Do you remember in the earlier <a href="activity2.html">poetry
activity</a> we used the python package ‘time’ to cause a delay between
the lines of our poem? I mentioned this can be useful in applications
such as game development but we can also use that package to help us
program our robot.</p>
<p>An example of the code to do this is below:</p>
<center>
<p><img src="images/lego17.png" /></p>
</center>
<pre class="python fold-hide"><code>from mindstorms import MSHub, Motor, MotorPair, ColorSensor, DistanceSensor, App
from mindstorms.control import wait_for_seconds, wait_until, Timer
from mindstorms.operator import greater_than, greater_than_or_equal_to, less_than, less_than_or_equal_to, equal_to, not_equal_to
import math
import time

# Create your objects here.
hub = MSHub()

# Write your program here.
for i in range(3):
    hub.speaker.beep(60, 0.5)
    hub.speaker.beep(60, 0.5)
    hub.speaker.beep(67, 0.5)
    hub.speaker.beep(67, 0.5)
    hub.speaker.beep(69, 0.5)
    hub.speaker.beep(69, 0.5)
    hub.speaker.beep(67, 0.5)
    time.sleep(2) </code></pre>
<p>We’ve made two notable changes to the code. On line 5 it now imports
the package ‘time’ so we can use the <code>sleep</code> function. Then
on line 19 we use <code>time.sleep(2)</code> to add a two second pause
to our program.</p>
<p>What this code does is:</p>
<ul>
<li><p>Import our packages (including time)</p></li>
<li><p>Initialise the hub</p></li>
<li><p>Begin a three replicate loop. Inside each loop it:</p>
<ul>
<li><p>Plays seven notes sequentially for 0.5 seconds using
<code>hub.speaker.beep</code></p></li>
<li><p>Pauses for two seconds using <code>time.sleep</code></p></li>
</ul></li>
<li><p>After the three loops the program is finished</p></li>
</ul>
<p>If you have time, why don’t you try modifying the length of the pause
between the sounds? Can you include a pause in your earlier tune that
you created?</p>
<p><br> <br></p>
<p><img src="images/logo.png" style="float: right;"/></p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
